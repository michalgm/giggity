"use strict";angular.module("Giggity",["Giggity.filters","Giggity.services","Giggity.directives","Giggity.controllers","ui.bootstrap","ngSanitize","ngRoute","mgcrea.ngStrap","angular-sortable-view","mgcrea.ngStrap.helpers.dimensions"]).config(["$compileProvider",function(t){t.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|sms|tel|smsto):/)}]).config(["$routeProvider",function(t){t.when("/gigs/:gig_id?/:action?",{templateUrl:"partials/partial2.html",controller:"Main",reloadOnSearch:!1,resolve:{MembersData:["Members",function(t){return t.promise}],GigsData:["Gigs",function(t){return t.promise}]}}),t.otherwise({redirectTo:"/gigs"})}]).run(["$route","$rootScope","$location",function(t,i,e){var n=e.search();n.gig_id&&(e.path("/gigs/"+n.gig_id),e.search("gig_id",null));var a=e.path;e.path=function(n,l){if(l===!1)var s=t.current,o=i.$on("$locationChangeSuccess",function(){t.current=s,o()});return a.apply(e,[n])}}]),angular.module("Giggity.controllers",[]).controller("Main",["$scope","$rootScope","$window","$route","$routeParams","Requests","$location","$filter","$position","$timeout","$modal","Members","Gigs",function(t,i,e,n,a,l,s,o,r,c,g,d,m){i.app_loaded=!1,t.Members=d,t.Gigs=m,t.gig={},t.members=[],t.membersList=[],t.songs=[],t.currentGigIndex=0,t.gig_loading=0,t.membernamefilter="",t.memberavailablefilter="",t.currentUser=localStorage.currentUser,t.location=s,t.tab={gig_details:!0},t.mobile=!1,t.mobileView="mobile-view-nav",t.showModal=!1,t.gigLimit=15,t.page=1,t.fetchingGigs=!1,t.$on("$routeUpdate",function(){t.setView()}),t.setTab=function(i){t.tab={},t.tab[i]=!0},t.setView=function(e){e&&(a.gig_id=null,s.path("/gigs",!1));var n=a.gig_id;!t.mobile||n?(t.mobileView="mobile-view-gig",n?"new"!=n?t.fetchGig(n):i.app_loaded?t.setTab(("gig"==t.gig.type?"band":"gig")+"_details"):i.app_loaded=!0:(t.fetchGig(),i.app_loaded=!0)):(t.mobileView="mobile-view-nav",i.app_loaded=!0)},t.changeUser=function(){t.currentUser=null,t.currentUserName=null,t.user=null,localStorage.removeItem("currentUser"),$("#current_user_input").val(),t.showModal="login"},t.saveGig=function(){return t.gig.tactical=t.gig.tactical?t.gig.tactical.id:"",t.gig.musical=t.gig.musical?t.gig.musical.id:"","new"==t.gig.gig_id&&delete t.gig.gig_id,l.write("saveGig",t.gig,t.gig.gig_id).then(function(i){i.is_musical=i.musical==t.currentUser,i.is_tactical=i.tactical==t.currentUser,t.Gigs.gigs[i.gig_id]=i,t.Gigs.updateGigsList(),t.setGig(i)})},t.deleteGig=function(i){return t.showModal=!1,i?l.write("deleteGig",{},i).then(function(i){delete t.Gigs.gigs[t.gig.gig_id],t.Gigs.updateGigsList(),t.fetchGig()}):t.fetchGig(),!1},t.changeGig=function(i,e){var n=t.Gigs.gigs[i]?t.Gigs.gigs[i].type:"gig",l=e&&"gig"==n?"band_details":"gig_details";t.setTab(l),a.gig_id=i,s.path("/gigs/"+i,!1),t.setView()},t.setGig=function(e){t.gig=e,t.setCurrentGigIndex(),t.gig.tactical=t.gig.tactical?t.members[t.gig.tactical]:"",t.gig.musical=t.gig.musical?t.members[t.gig.musical]:"",t.gig.setlist=t.gig.setlist||[],t.membernamefilter="",t.memberavailablefilter="",t.gig_loading=0,i.app_loaded=!0,t.$broadcast("gigSet")},t.fetchGig=function(i){return t.gig_loading=1,i&&t.Gigs.gigs[i]||(i=t.Gigs.gigsList[0].gig_id),l.fetch("fetchGig",{gig_id:i}).then(function(i){t.setGig(i)})},t.fetchGigs=function(){return t.fetchingGigs=!0,t.Gigs.fetchGigs(t.currentUser,t.Gigs.fetchAllGigs).then(function(){t.fetchingGigs=!1})},t.fetchSongs=function(){return l.fetch("fetchSongs").then(function(i){t.songs=i})},t.refreshData=function(){t.fetchSongs(),t.fetchGigs()},t.newGig=function(i){var i=i?i:"gig",e="gig"==i?"New Gig":"Rehearsal";t.gig={title:e,availability:{},gig_id:"new",type:i,meet_time:"01:00",band_start:"gig"===i?"02:00":"19:00",band_end:"gig"===i?"03:00":"22:00",start_time:"02:00",end_time:"03:00",approved:0,publish:!1,"private":!1},t.changeGig("new",!0)},t.setCurrentGigIndex=function(){if(t.gig){var i=t.gig.gig_id;$(t.Gigs.gigsList).each(function(e,n){if(n.gig_id==i)return t.currentGigIndex=e,!1})}},t.getAvailability=function(i,e){var i=i?i:t.gig.gig_id,e=e?e:t.currentUser,n=t.Gigs.gigs[i];return e&&n&&n.availability&&n.availability[e]?"-1"==n.approved?"Gig Declined":n.availability[e].available:""},t.editUserAttrib=function(t){$("#"+t).addClass("edit"),$("#"+t+"_input").focus()},t.editAvailable=function(i){t.setTab("availability"),t.memberavailablefilter=i},t.setAvailability=function(i,e){i=i||t.currentUser;var n={member_id:i};return e?n=t.Gigs.gigs[e].availability[i]:(e=t.gig.gig_id,n=t.gig.availability[i]),n.action="setAvailability",l.write("setAvailability",n,e).then(function(n){t.Gigs.gigs[e].availability[i]=n,e==t.gig.gig_id&&(t.gig.availability[i]=t.Gigs.gigs[e].availability[i]),t.Gigs.updateGigsList()})},t.setModalState=function(i){t.showModal=i},t.currentUser||t.changeUser(),t.$watch("Gigs.fetchAllGigs",function(i,e){i!=e&&t.fetchGigs()}),t.$watch("Members.members",function(){t.members=d.members,t.membersList=d.membersList,t.members&&(t.currentUserName=t.members[t.currentUser]?t.members[t.currentUser].name:"")}),t.$watch("Gigs.hideRehearsals",function(){t.Gigs.updateGigsList()}),t.fetchSongs();var p=t.$watch(function(){return t.members&&t.Gigs.gigsList},function(i){i&&(a.action&&a.gig_id&&t.currentUser?(t.Gigs.gigs[a.gig_id].availability[t.currentUser].available=a.action,t.setAvailability(t.currentUser,a.gig_id).then(function(){t.setView("new"==a.gig_id)})):t.setView("new"==a.gig_id),p())})}]);var app=angular.module("Giggity.directives",[]);app.directive("memberComments",[function(){return{restrict:"A",link:function(t,i,e){function n(e){if(e){var n=t.membersList,l="";$(n).each(function(i,n){if(e[n.id]&&e[n.id][a]){var s=n.name,o=t.gig.availability[n.id][a];l+="<strong>"+s+"</strong>:&nbsp;&nbsp;<span>"+o+"</span><br/>"}}),i.html(l)}}var a=e.type?e.type:"concerns";t.$watch("gig.availability[currentUser]",function(i){n(t.gig.availability)},!0),n(t.gig.availability)}}}]),app.directive("fadeIn",function(){return{restrict:"A",link:function(t,i,e){t.$watch(e.fadeIn,function(t){t?$(i).fadeIn():$(i).hide()})}}}),app.directive("gigDetails",[function(){return{restrict:"A",link:function(t,i,e){function n(t){if(t){var e="";$(t.split("\n\n")).each(function(t,i){var n=i.split(":");n[0]=n[0].replace(/_/g," "),n[0]&&n[0].toLowerCase(),n[1]||(n[1]="&nbsp;"),e+='<dt style="text-transform:capitalize">'+n[0]+"</dt><dd class='clearfix'>"+n[1]+"</dd>"}),i.html(e)}}t.$watch("gig.details",function(t){n(t)}),n(t.gig.details)}}}]),app.directive("eatClick",function(){return function(t,i,e){$(i).click(function(t){return t.stopPropagation(),!1})}}),app.directive("feedbackButton",["$rootScope",function(t){return{restrict:"A",scope:{status:"@"},link:function(i,e,n){i.rootScope=t,e.bind("click",function(t){i.$apply(function(){i.rootScope.remoteAction="pending",n.$set("disabled",!0),$(e).find(".glyphicon").hide(),e.prepend("<span class='processing-spinner glyphicon glyphicon-refresh glyphicon-spin'></span>")})}),i.$watch("rootScope.remoteAction",function(t,a){i.rootScope.remoteAction||(n.$set("disabled",null),$(e).find(".processing-spinner").remove(),$(e).find(".glyphicon").show())})}}}]),app.directive("gigStatus",[function(){return{restrict:"A",link:function(t,i,e){function n(t){var e="glyphicon glyphicon-thumbs-up",n="text-success",a="Approved";t==-1?(e="glyphicon glyphicon-thumbs-down",n="text-error",a="Declined"):0==t&&(e="glyphicon glyphicon-question-sign",n="text-warning",a="Undecided"),i.html("<span class='"+n+"'><i class='"+e+"'></i> "+a+"</span>")}t.$watch("gig.approved",function(t){n(t)}),n(e.gigStatus)}}}]),app.directive("addclassonhover",function(){return{link:function(t,i,e){var n=e.addclassonhover;$(i).mouseenter(function(){$("."+n).removeClass(n),i.addClass(n)}),$(i).mouseleave(function(t){"SELECT"!=t.target.nodeName&&i.removeClass(n)})}}}),app.directive("editToggle",["$compile",function(t){return{scope:!0,link:function(i,e,n){i.editing=!1,i.showEdit=function(){i.editing=!0,e.addClass("edit"),$(e).find("textarea, select").focus()},e.find("span").after(t("<span ng-show='editing' class='btn btn-default btn-sm'><i class='glyphicon glyphicon-check'></i> Save</span><span ng-hide='editing' class='btn btn-default btn-xs' ng-click='showEdit()'><i class='glyphicon glyphicon-edit'></i> Edit<span>")(i)),$(e).find("textarea, select").on("blur",function(){i.$apply(function(){e.removeClass("edit"),i.editing=!1})})}}}]),app.directive("loadingFeedback",["$parse",function(t){return{restrict:"A",link:function(i,e,n){i.update=function(){$(e).trigger("blur"),e.parent().append("<span class='label label-primary feedback' type='button'><i class='glyphicon glyphicon-refresh glyphicon glyphicon-spin'></i> Saving...</button>");var a=t(n.loadingFeedback);a(i).then(function(){$(e).nextAll(".feedback").remove()})},e.on("change",i.update)}}}]),app.directive("resize",["$window",function(t){return{link:function(i){function e(){i.mobile=t.innerWidth<768}angular.element(t).bind("resize",function(){i.$broadcast("windowResize"),i.$apply(function(){e()})}),e()}}}]),app.directive("modal",["$rootScope","Gigs",function(t,i){return{restrict:"A",templateUrl:"modal.html",link:function(i,e,n){i.setUser=function(){i.user&&i.user.id?(i.currentUser=i.user.id,localStorage.currentUser=i.user.id,i.currentUserName=i.members[i.currentUser].name,$("#login_error").hide(),$("#login_form").removeClass("has-error"),i.showModal=!1,i.fetchGigs()):($("#login_form").addClass("has-error"),$("#login_error").show())},$("#modal").on("hidden.bs.modal",function(){i.$apply(function(){i.showModal=!1})}),i.$watch("showModal",function(i){0==i?($("#modal").modal("hide"),t.remoteAction=!1):($("#modal").modal("show"),$("#modal").on("shown.bs.modal",function(){$("#current_user_input").focus()}))})}}}]),app.directive("datePicker",function(){return{restrict:"E",template:'<div class="input-group date-picker"><input class="form-control" ng-model="model" use-native="true" data-model-date-format="yyyy-MM-dd" data-date-format="MM/dd/yyyy" data-date-type="string" data-autoclose="1" bs-datepicker type="text"><span ng-click="focus()" class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span></div>',scope:{model:"="},link:function(t,i,e){t.focus=function(){$(i).find("input").focus()}}}}),app.directive("timePicker",function(){return{restrict:"E",template:'<div class="input-group time-picker col-xs-5"><input class="form-control" size="8" ng-model="model" use-native="true" data-time-type="string" data-autoclose="1" bs-timepicker data-model-time-format="H:mm" data-time-format="h:mm a" data-length="1" data-arrow-behavior="picker" type="text"><span ng-click="focus()" class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span></div>',scope:{model:"="},link:function(t,i,e){t.focus=function(){$(i).find("input").focus()}}}}),app.directive("setList",["$filter","$timeout",function(t,i){return{restrict:"A",templateUrl:"setList.html",scope:{repertoire:"=songs",setlist:"="},link:function(e,n,a){e.newsong="",e.addSong=function(i){var i=i||e.newsong;if(i){var n=t("count")(e.setlist.map(function(t){return t.replace(/ \(\d+\)$/,"")}),i);n&&(i+=" ("+(n+1)+")"),e.newsong="",e.setlist.push(i),e.songs.indexOf(i)>=0&&e.songs.splice(e.songs.indexOf(i),1)}},e.removeSong=function(t){e.songs.push(t),e.setlist.splice(e.setlist.indexOf(t),1)};var l=function(){e.songs=angular.copy(t("filterArray")(e.repertoire,e.setlist))};e.$on("gigSet",function(){i(function(){l()})}),e.$watch("repertoire",l)}}}]),app.directive("emailInfo",["$filter","Members","Requests",function(t,i,e){return{restrict:"A",templateUrl:"emailInfo.html",scope:{gig:"="},link:function(n,a,l){n.dateFormat=t("date");"2000-01-01T"+n.gig.band_start+":00-0800";n.timeFormat=function(i){var e="2000-01-01T"+i+":00";return t("date")(e,"h:mm a")},n.subject="Gig Details: "+n.dateFormat(n.gig.date,"M/d")+"@"+n.timeFormat(n.gig.band_start)+" - "+n.gig.title,n.body="When: "+n.dateFormat(n.gig.date,"EEEE, M/d")+", Meet at "+n.timeFormat(n.gig.meet_time||"???")+", play from "+n.timeFormat(n.gig.band_start)+" - "+n.timeFormat(n.gig.band_end)+"\nWhere: "+n.gig.location+"\nTactical: "+(n.gig.tactical?i.members[n.gig.tactical.id].name:"???")+"\nMusical: "+(n.gig.musical?i.members[n.gig.musical.id].name:"???")+"\nColors: "+(n.gig.colors||"???")+"\nYeses: "+t("memberProperty")(t("availableFilter")(i.membersList,["Yes",n.gig]),["name"])+"\nMaybes: "+t("memberProperty")(t("availableFilter")(i.membersList,["Maybe",n.gig]),["name"])+"\n\nDetails:\n"+(n.gig.notes||"Hey! You need to save the gig details into giggity!"),n.gig.setlist.length&&(n.body+="\n\nSet List: ",$.each(n.gig.setlist,function(t,i){n.body+="\n"+(t+1)+". "+i})),n.send=function(){e.write("sendInfoEmail",{subject:n.subject,body:n.body}).then(function(t){n.$parent.setModalState(!1)})}}}}]);var app=angular.module("Giggity.filters",[]);app.filter("toArray",function(){return function(t){return t instanceof Object?$.map(t,function(t,i){return Object.defineProperty(t,"$key",{__proto__:null,value:i})}):t}}),app.filter("nlBr",function(){return function(t){if(t)return t.replace(/\n\n/g,"<br/>")}}),app.filter("length",function(){return function(t){return t.length}}),app.filter("count",function(){return function(t,i){var e=$.grep(t,function(t){return t===i});return e.length}}),app.filter("filterArray",function(){return function(t,i){return $.grep(t,function(t){return i.indexOf(t)<0})}}),app.filter("memberProperty",function(){return function(t,i){var e=i[0],n=i[1]?i[1]:", ",a=[];return $(t).each(function(t,i){a.push(i[e])}),a.join(n)}}),app.filter("available",function(){return function(t){if(t)return t="Yes"==t?"Available":"No"==t?"Unavailable":t}}),app.filter("userUnknownCount",function(){return function(t,i){var e=0;return i&&$(t).each(function(t,n){n.approved!=-1&&"Unknown"==n.availability[i].available&&e++}),e}}),app.filter("URIencode",function(){return window.encodeURIComponent}),app.filter("availableFilter",function(){return function(t,i){var e=[],n=i[0];if(i[1]&&i[1].availability){var a=i[1].availability;return $(t).each(function(t,i){a[i.id]&&("Coming"!=n||"Yes"!=a[i.id].available&&"Maybe"!=a[i.id].available?a[i.id].available!=n&&""!=n||e.push(i):e.push(i))}),e}return t}}),app.filter("commentFilter",function(){return function(t,i){var e="comments",n=[];return i&&i.availability?($(t).each(function(t,a){i.availability[a.id]&&i.availability[a.id][e]&&n.push(a)}),n):t}}),app.filter("concernFilter",function(){return function(t,i){var e="concerns",n=[];return i&&i.availability?($(t).each(function(t,a){i.availability[a.id]&&i.availability[a.id][e]&&n.push(a)}),n):t}}),app.filter("member",function(){return function(t){if(t)return t.name}}),app.filter("time",function(){return function(t){if(!t)return null;if(t.indexOf("M")>=0)return t;var i=t.split(":"),e=i[0],n=i[1],a="AM";return e>12?(e-=12,a="PM"):12==e?a="PM":0==e&&(e=12),e+":"+n+" "+a}}),app.filter("slice",function(){return function(t,i,e){return t instanceof Array?t.slice(i).slice(0,e):t}});var app=angular.module("Giggity.services",[]);app.service("Members",["Requests","$filter",function(t,i){var e=this;return e.members=null,e.membersList=null,e.promise=t.fetch("fetchMembers").then(function(t){e.members=t,e.membersList=i("orderBy")(i("toArray")(e.members),"name")}),e.getMembers=function(){return members},e}]),app.service("Gigs",["Requests","$filter",function(t,i){var e=this;e.gigs=null,e.gigsList=null,e.hideRehearsals=!1,e.fetchAllGigs=!1,e.updateGigsList=function(){var t=i("orderBy")(i("toArray")(e.gigs),["date","band_start"]);t&&(e.gigsList=t.filter(function(t){return"gig"==t.type||!e.hideRehearsals}))},e.fetchGigs=function(i,n){return t.fetch("fetchGigsList",{fetchAllGigs:n,user_id:i}).then(function(t){e.gigs=t,e.updateGigsList()})};var n=localStorage.currentUser||null;return e.fetchGigs(n,!1),e}]),app.service("Requests",["$http","$rootScope",function(t,i){var e=this,n=function(t){i.remoteAction=!1;var t=t.data,e="An error occurred";if(1!==t.statusCode){var n;return"undefined"==typeof t.statusCode?(n="<pre>"+t+"</pre>",e="An unknown error occurred"):n=t.statusString,$("#status").html(e+": "+n).removeClass().addClass("alert alert-danger").show(),void(i.app_loaded=!0)}return $("#status").hide(),t.data};e.fetch=function(e,a){return i.remoteAction=e,a=a||{},a.action=e,t.get("backend/requests.php",{params:a,timeout:6e5}).then(n)},e.write=function(e,a,l){return i.remoteAction=e,t.post("backend/requests.php",{action:e,gig_id:l,data:a},{timeout:6e5}).then(n)}}]),angular.module("Giggity").run(["$templateCache",function(t){t.put("partials/partial2.html","<div class='alert'style='display:none;' id='status'></div>\n<div id='content' class='{{mobileView}}' ng-class=\"{'mobile scroll-container':mobile}\">\n\t<div class='well well-small scroll-container' ng-class='{\"col-sm-4\": !mobile}' id='nav' >\n\t\t<nav class=\"navbar navbar-inverse scroll-header\">\n\t\t\t<div class=\"container-fluid\">\n\t\t\t\t<div class=\"navbar-header\">\n\t\t\t\t\t<a href=\"#\" class=\"navbar-brand\"><img style='width:20px;display: inline' src='img/giggity.png'/> Giggity</a>\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"nav navbar-nav navbar-right\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a class='user-link' data-placement='bottom' bs-tooltip data-title='Sign out or switch user' href='' ng-click='changeUser()'><i class='glyphicon glyphicon-user'></i> {{currentUserName && currentUserName || 'Not Signed In' }} </a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a><small class='badge' bs-tooltip data-title='{{ Gigs.gigsList | userUnknownCount:currentUser }} gigs with unknown availability' data-placement='bottom' ng-class=\"(Gigs.gigsList | userUnknownCount:currentUser) == 0 && ' ' || 'badge-danger'\">{{ Gigs.gigsList | userUnknownCount:currentUser }}</small></a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class=\"dropdown\" ng-hide='mobile' data-placement='bottom' bs-tooltip data-title='Options'>\n\t\t\t\t\t\t<a class=\"dropdown-toggle\" href='' data-toggle=\"dropdown\"><i class='glyphicon glyphicon-cog'></i></a>\n\t\t\t\t\t\t<ul class='dropdown-menu'>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<div style='padding: 0px 10px;' class='checkbox'>\n\t\t\t\t\t\t\t\t\t<label> <input type='checkbox' ng-model='Gigs.fetchAllGigs'> Show Past Gigs</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li><a href='/gig_request.php' target='_blank'>Add a new gig</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li data-placement='bottom' bs-tooltip data-title='Refresh gigs'>\n\t\t\t\t\t\t<a href='' ng-click='fetchGigs()' ><i class='glyphicon glyphicon-refresh' ng-class='{\"glyphicon-spin\": fetchingGigs}'></i></a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div><!-- /.container-fluid -->\n\t\t</nav>\n\t\t<table id='list_container' class='nav nav-list table table-striped table-condensed table-hover scroll-body'>\n\t\t\t<tbody id='gig_list'>\n\t\t\t\t<tr ng-show='Gigs.gigsList.length > gigLimit'>\n\t\t\t\t\t<td colspan='3' class='text-center'>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan='3'>\n\t\t\t\t\t\t<div class='checkbox pull-left' style='margin: 0px;'>\n\t\t\t\t\t\t\t<label> <input type='checkbox' ng-model='Gigs.hideRehearsals'> Hide Rehearsals</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"btn-group pull-right\">\n\t\t\t\t\t\t\t<button ng-click='newGig(\"rehearsal\")' id='create_rehearsal' class='btn btn-xs btn-info'><i class=\"glyphicon glyphicon-plus\"></i> New Rehearsal</button>\n\t\t\t\t\t\t\t<button ng-click='newGig()' id='create_gig' class='btn btn-xs btn-info'><i class=\"glyphicon glyphicon-plus\"></i> New Gig</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td colspan='3' class='text-center' ng-show='Gigs.gigsList.length > gigLimit'>\n\t\t\t\t\t\t<pagination class=\"pagination-sm\" ng-model='page' items-per-page='gigLimit' max-size='7' boundary-links='true' total-items='Gigs.gigsList.length'></pagination>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr ng-click='changeGig(current_gig.gig_id)' ng-repeat=\"current_gig in Gigs.gigsList | slice:gigLimit*(page-1):gigLimit\" ng-class=\"{active:current_gig.gig_id == gig.gig_id, info: current_gig.is_tactical == 1 || current_gig.is_musical == 1 }\" id='{{current_gig.gig_id}}' addclassonhover='hover'>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<i class='approve_icon glyphicon' ng-class=\"{'glyphicon-thumbs-up': current_gig.approved==1, 'glyphicon-thumbs-down':current_gig.approved==-1, 'glyphicon-question-sign': current_gig.approved==0 && current_gig.type == 'gig', 'glyphicon-heart text-danger': current_gig.type == 'rehearsal'}\"></i>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<span ng-if='Gigs.fetchAllGigs' class='date'>{{current_gig.date+'T08' | date:'MM/dd/yy'}}</span>\n\t\t\t\t\t\t<span ng-if='!Gigs.fetchAllGigs' class='date'>{{current_gig.date+'T08' | date:'MM/dd'}}</span>\n\t\t\t\t\t</td>\n\t\t\t\t\t<td style='width: 100%' class='form-inline'>\n\t\t\t\t\t\t<span ng-show='mobile' class='pull-right mobile_nav_arrow'><i class='glyphicon glyphicon-chevron-right'></i></span>\n\t\t\t\t\t\t<span ng-click='changeGig(current_gig.gig_id, 1);' eat-click=1 class='gig_list_edit pull-right'><i class='glyphicon glyphicon-pencil'></i> Edit</span>\n\t\t\t\t\t\t<a href='' ng-class='{\"text-muted\": current_gig.approved == -1}' bs-tooltip data-title='{{(current_gig.is_tactical == 1 || current_gig.is_musical == 1) ? \"You are \"+(current_gig.is_tactical == 1 ? \"tactical\" : \"musical\")+\" for this gig\" : \"\"}}'>{{current_gig.title}} <span ng-if=\"(current_gig.is_tactical == 1 || current_gig.is_musical == 1)\" class=\"glyphicon\"  ng-class=\"{'glyphicon-bullhorn': current_gig.is_tactical == 1, 'glyphicon-music': current_gig.is_musical == 1}\"></span></a>\n\t\t\t\t\t\t<div class='form-inline' ng-show='currentUser && current_gig.approved != -1' ng-class=\"{'text-danger': getAvailability(current_gig.gig_id) == 'Unknown'}\">\n\t\t\t\t\t\t\t<small>Your Availability:</small>\n\t\t\t\t\t\t\t<select style='display: none;' loading-feedback='setAvailability({{currentUser}}, {{current_gig.gig_id}})' ng-model='Gigs.gigs[current_gig.gig_id].availability[currentUser].available' class='gig_list_availability_edit form-control input-xs' eat-click=1>\n\t\t\t\t\t\t\t\t<option value='Yes' data-icon='glyphicon glyphicon-smile'>Available</option>\n\t\t\t\t\t\t\t\t<option value='No' data-icon='glyphicon glyphicon-frown'>Unavailable</option>\n\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-meh'>Maybe</option>\n\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-question'>Unknown</option>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t<small class='gig_list_availability'>\n\t\t\t\t\t\t\t\t<i ng-class=\"{'glyphicon glyphicon-smile': Gigs.gigs[current_gig.gig_id].availability[currentUser].available == 'Yes', 'glyphicon glyphicon-frown': Gigs.gigs[current_gig.gig_id].availability[currentUser].available == 'No', 'glyphicon glyphicon-meh': Gigs.gigs[current_gig.gig_id].availability[currentUser].available == 'Maybe', 'glyphicon glyphicon-question': Gigs.gigs[current_gig.gig_id].availability[currentUser].available == 'Unknown'}\"></i>&nbsp;{{Gigs.gigs[current_gig.gig_id].availability[currentUser].available | available }}\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t\t<!-- <button data-loading-text='{{savingText}}' class='btn btn-default btn-xs availability-save-button' type='button'></button> -->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n\t<div class='mobile-nav navbar-inverse navbar-static-top container-fluid scroll-header'>\n\t\t<div class='navbar-inner text-center row'>\n\t\t\t<i class='glyphicon glyphicon-menu-hamburger' id='mobile_nav_link' ng-click=\"setView(true)\"></i>\n\t\t\t<h3 class='navbar-text'>{{gig.title}}</h3>\n\t\t</div>\n\t\t<div class='row mobile-nav-controls'>\n\t\t\t<div class='col-xs-12 text-center mobile-nav-date'>\n\t\t\t\t<span class='navbar-text' ng-show='gig.date'>{{ gig.date+'T08' | date:'EEEE, MMMM d, y' }}</span>\n\t\t\t</div>\n\t\t\t<div class='col-xs-2 text-left'>\n\t\t\t\t<a class='btn-prev btn-circle btn btn-primary' ng-show='Gigs.gigsList[currentGigIndex-1]' ng-click='changeGig(Gigs.gigsList[currentGigIndex-1].gig_id)'><i class='glyphicon glyphicon-menu-left'></i></a>\n\t\t\t</div>\n\t\t\t<div class='col-xs-8 text-center'>\n\t\t\t\t<span class='btn-group'>\n\t\t\t\t\t<button class='btn btn-primary btn-sm' feedback-button ng-click='saveGig()'><i class='glyphicon glyphicon-ok'></i> Save Gig</button>\n\t\t\t\t\t<button class='btn btn-danger btn-sm' feedback-button ng-click='setModalState(\"confirm\")'><i class='glyphicon glyphicon-remove'></i> Delete Gig</button>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class='col-xs-2 text-right'>\n\t\t\t\t<a class='btn-next btn-circle btn btn-primary' ng-show='Gigs.gigsList[currentGigIndex+1]' ng-click='changeGig(Gigs.gigsList[currentGigIndex+1].gig_id)'><i class='glyphicon glyphicon-menu-right'></i></a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div style='' class='col-md-8 scroll-container' id='gig'>\n\t\t<div id='gig_loading' ng-show='gig_loading' fade-in='gig_loading'>\n\t\t\t<div>\n\t\t\t\t<h1 class='text-center alert alert-info'><i class='glyphicon glyphicon-refresh glyphicon glyphicon-spin'></i> Loading</h1>\n\t\t\t</div>\n\t\t</div>\n\t\t<div ng-if='gig.gig_id' class='scroll-container'>\n\t\t\t<div class='page-header scroll-header'>\n\t\t\t\t<h1>\n\t\t\t\t\t<div class='pull-right text-right'>\n\t\t\t\t\t\t<div class='btn-group'>\n\t\t\t\t\t\t\t<button class='btn btn-primary' feedback-button ng-click='saveGig()'><i class='glyphicon glyphicon-ok'></i> Save Gig</button>\n\t\t\t\t\t\t\t<button class='btn btn-danger' feedback-button ng-click='setModalState(\"confirm\")'><i class='glyphicon glyphicon-remove'></i> Delete Gig</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{gig.title}}<br/>\n\t\t\t\t\t<small ng-show='gig.date'>{{ gig.date+'T08' | date:'EEEE, MMMM d, y' }}&nbsp; <span ng-if='gig.type == \"gig\"' gig-status='{{gig.approved}}'></span></small>\n\t\t\t\t</h1>\n\t\t\t\t\t\t<div class='col-xs-2'>\n\t\t\t\t\t\t\t<a class='btn btn-xs btn-default' ng-show='Gigs.gigsList[currentGigIndex-1]' ng-click=\"changeGig(Gigs.gigsList[currentGigIndex-1].gig_id)\"><i class='glyphicon glyphicon-menu-left'></i> Previous Gig</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-xs-8 text-center' id='availableCounts'>\n\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t<span ng-click=\"editAvailable('Yes')\" class='label label-success'>{{(membersList | availableFilter:['Yes', gig]).length }} Available</span>\n\t\t\t\t\t\t\t\t<span ng-click=\"editAvailable('Maybe')\" class='label label-warning'>{{(membersList | availableFilter:['Maybe', gig]).length }} Maybes</span>\n\t\t\t\t\t\t\t\t<span ng-click=\"editAvailable('No')\" class='label label-danger'>{{(membersList | availableFilter:['No', gig]).length }} Unavailable</span>\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class='col-xs-2 text-right'>\n\t\t\t\t\t\t\t<a class='btn btn-xs btn-default' ng-show='Gigs.gigsList[currentGigIndex+1]' ng-click=\"changeGig(Gigs.gigsList[currentGigIndex+1].gig_id)\">Next Gig <i class='glyphicon glyphicon-menu-right'></i></a>\n\t\t\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<form ng-show='gig.type == \"rehearsal\"' id='edit_gig' class='form-horizontal clearfix rehearsal-form scroll-body' ng-submit=\"saveGig()\">\n\t\t\t\t<input style='visibility: hidden; position: absolute; top:0px; left: 0px; width: 1px; height: 1px;' type='submit'/>\n\t\t\t\t<input type='hidden' name='gig_id' ng-model='gig.gig_id'/>\n\t\t\t\t<tabset justified=\"!mobile\">\n\t\t\t\t\t<tab heading='Details' class='form-inline' id='gig_details' active=\"tab['gig_details']\">\n\t\t\t\t\t\t<div class='rehearsal-container'>\n\t\t\t\t\t\t\t<div ng-show='currentUser && gig.gig_id != \"new\"' class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right'>Your Availability</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8' ng-class=\"getAvailability() == 'Unknown' && 'bg-danger' || ''\">\n\t\t\t\t\t\t\t\t\t<div class='alert-danger' ng-show=\"getAvailability() == 'Unknown'\">You haven't entered your availability for this rehearsal.</div>\n\t\t\t\t\t\t\t\t\t\t<div class='user_gig_details_edit form-inline' ng-init='saving=false' feedback='saving'>\n\t\t\t\t\t\t\t\t\t\t\t<select id='user_availability_input' ng-model='gig.availability[currentUser].available' class='form-control' loading-feedback='setAvailability()'>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='Yes' data-icon='glyphicon glyphicon-smile'>Available</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='No' data-icon='glyphicon glyphicon-frown'>Unavailable</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-meh'>Maybe</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-question'>Unknown</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='title'>Title</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' type='text' ng-model='gig.title'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='date'>Date</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<date-picker model='gig.date'></date-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class=\"col-md-4 control-label text-right\">Time</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<time-picker model='gig.band_start'></time-picker>\n\t\t\t\t\t\t\t\t\t<label for='band_end'  style='vertical-align: text-bottom;'>To</label>\n\t\t\t\t\t\t\t\t\t<time-picker model=\"gig.band_end\"></time-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='location'>Location</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' type='text' ng-model='gig.location'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='tactical'>Facilitator</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' autocomplete='off' type='text' ng-model='gig.tactical' typeahead='member as member.name for member in membersList | filter:{name:$viewValue}' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='notes'>Details</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<textarea class='form-control' spellcheck=\"true\" rows=5 ng-model='gig.notes'></textarea>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right'>Who's Coming</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<strong>Yeses:</strong> {{(membersList | availableFilter:['Yes', gig] | memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/><strong>Maybes:</strong> {{(membersList |  availableFilter:['Maybe', gig] |  memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/><strong>Noes:</strong> {{(membersList |  availableFilter:['No', gig] |  memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/>Contact Yeses and Maybes: <a href=\"sms:{{(membersList | availableFilter:['Coming', gig] | memberProperty:['phone'])}}\">Text</a> |\n\t\t\t\t\t\t\t\t\t<a href=\"mailto:{{(membersList | availableFilter:['Coming', gig] | memberProperty:['email', ';'])}}\">Email</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</tab>\n\t\t\t\t\t<tab heading='Availability' class='tab-pane' id='availability' active=\"tab['availability']\">\n\t\t\t\t\t\t<div class='band-availability'>\n\t\t\t\t\t\t\t<div class='panel panel-default'>\n\t\t\t\t\t\t\t\t<div class='panel-heading'>\n\t\t\t\t\t\t\t\t\t<div class='row form-inline text-center'>\n\t\t\t\t\t\t\t\t\t\t<span class='col-xs-6'>\n\t\t\t\t\t\t\t\t\t\t\t<label for='name_filter'>Name:</label>\n\t\t\t\t\t\t\t\t\t\t\t<input name='name_filter' autocomplete='off' style='margin-right: 20px;' class='form-control input-sm' type='text' ng-model='membernamefilter'/>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class='col-xs-6'>\n\t\t\t\t\t\t\t\t\t\t\t<label for='availability_filter'>Availability:</label>\n\t\t\t\t\t\t\t\t\t\t\t<select name='availability_filter' class='form-control input-sm' ng-model='memberavailablefilter' id='member_availability_filter'>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='' data-icon='glyphicon glyphicon-smile'>All</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='Yes' data-icon='glyphicon glyphicon-smile'>Available</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='No' data-icon='glyphicon glyphicon-frown'>Unavailable</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-meh'>Maybe</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-question'>Unknown</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class='list-group'>\n\t\t\t\t\t\t\t\t\t<li ng-class=\"{\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-success': gig.availability[member.id].available == 'Yes',\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-warning': gig.availability[member.id].available == 'Maybe',\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-danger': gig.availability[member.id].available == 'No'\n\t\t\t\t\t\t\t\t\t\t}\" class='list-group-item' ng-repeat=\"member in membersList | filter:{name:membernamefilter} | availableFilter:[memberavailablefilter, gig]\" id=\"availability_{{member.id}}\">\n\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t<span class='col-xs-5'>\n\t\t\t\t\t\t\t\t\t\t\t\t{{member.name}} <!--<small ng-style=\"{display: mobile ? 'block': ''}\">({{member.groups}})</small>-->\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='col-xs-7'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group btn-group\" ng-class='{\"btn-group-xs\": mobile}' ng-click='update()' loading-feedback=\"setAvailability({{member.id}})\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-success': gig.availability[member.id].available == 'Yes'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Yes'\">Yes</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-warning': gig.availability[member.id].available == 'Maybe'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Maybe'\">Maybe</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-danger': gig.availability[member.id].available == 'No'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'No'\">No</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Unknown'\">Unknown</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</tab>\n\t\t\t\t</tabset>\n\t\t\t</form>\n\n\t\t\t<form ng-show='gig.type == \"gig\"' id='edit_gig' class='form-horizontal clearfix gig-form scroll-container' ng-submit=\"saveGig()\">\n\t\t\t\t<input style='visibility: hidden; position: absolute; top:0px; left: 0px; width: 1px; height: 1px;' type='submit'/>\n\t\t\t\t<input type='hidden' name='gig_id' ng-model='gig.gig_id'/>\n\t\t\t\t<tabset justified=\"!mobile\">\n\t\t\t\t\t<tab heading='Details' class='form-inline' id='gig_details' active=\"tab['gig_details']\">\n\t\t\t\t\t\t<dl id='gig_details_list' class='dl-horizontal' style='clear:both'>\n\t\t\t\t\t\t\t<dt>Approval Status</dt>\n\t\t\t\t\t\t\t<dd class='clearfix' gig-status='{{gig.approved}}'></dd>\n\n\t\t\t\t\t\t\t<div ng-show='currentUser' id='availability_info' ng-class=\"getAvailability() == 'Unknown' && 'alert-danger' || 'alert-info'\" class='alert alert-info'>\n\t\t\t\t\t\t\t\t<div class='lead' ng-show=\"getAvailability() == 'Unknown'\">You haven't entered your availability for this gig.</div>\n\t\t\t\t\t\t\t\t<dt>Your Availability</dt>\n\t\t\t\t\t\t\t\t<dd id='user_availability' class='user_gig_details form-inline' edit-toggle>\n\t\t\t\t\t\t\t\t\t<select id='user_availability_input' ng-model='gig.availability[currentUser].available' class='form-control input-sm user_gig_details_edit' loading-feedback='setAvailability()'>\n\t\t\t\t\t\t\t\t\t\t<option value='Yes' data-icon='glyphicon glyphicon-smile'>Available</option>\n\t\t\t\t\t\t\t\t\t\t<option value='No' data-icon='glyphicon glyphicon-frown'>Unavailable</option>\n\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-meh'>Maybe</option>\n\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-question'>Unknown</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t<span class='user_gig_details_none'>{{gig.availability[currentUser].available | available }}</span>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<dt ng-hide='gig.approved!=0'>Your Concerns</dt>\n\t\t\t\t\t\t\t\t<dd ng-hide='gig.approved!=0' id='user_concerns' class='user_gig_details' edit-toggle>\n\t\t\t\t\t\t\t\t\t<textarea class='form-control user_gig_details_edit' id='user_concerns_input' spellcheck=\"true\" rows=5 ng-model='gig.availability[currentUser].concerns' placeholder=\"Do you have concerns about the BLO supporting this gig?\" loading-feedback='setAvailability()'></textarea>\n\t\t\t\t\t\t\t\t\t<span class='user_gig_details_none'>{{gig.availability[currentUser].concerns || 'None' }}</span>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t\t<dt>Your Comments</dt>\n\t\t\t\t\t\t\t\t<dd id='user_comments' class='user_gig_details' edit-toggle>\n\t\t\t\t\t\t\t\t\t<textarea class='form-control user_gig_details_edit' id='user_comments_input' spellcheck=\"true\" rows=5 ng-model='gig.availability[currentUser].comments' placeholder=\"Enter any questions or comments you have about the gig\"  loading-feedback='setAvailability()'></textarea>\n\t\t\t\t\t\t\t\t\t<span class='user_gig_details_none'>{{gig.availability[currentUser].comments || 'None' }}</span>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<dt>When</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'><span ng-show='gig.date'>{{ gig.date+'T08' | date:'EEEE, MMMM d, y' }} from {{gig.start_time | time }} - {{ gig.end_time  | time}}\n\t\t\t\t\t\t\t\t<br/>Meet at {{ gig.meet_time | time }}\n\t\t\t\t\t\t\t\t<br/>Band play time from {{gig.band_start | time }} to {{gig.band_end | time}}\n\t\t\t\t\t\t\t\t</span>&nbsp;\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dt>Where</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>{{ gig.location}} <span ng-show='gig.location'>[<small><a href='http://maps.google.com?q={{gig.location | URIencode }}' target='map'><i class='glyphicon glyphicon-map-marker'></i>Map</a></small>]</span>&nbsp; </dd>\n\t\t\t\t\t\t\t<dt>Tactical</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t{{gig.tactical.name}} &nbsp;\n\t\t\t\t\t\t\t\t<span ng-show='gig.tactical'>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='mailto:{{gig.tactical.email}}'>Email</a>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='smsto:{{gig.tactical.phone}}'>Text</a>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='tel:{{gig.tactical.phone}}'>Call</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dt>Musical</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t{{ gig.musical.name }} &nbsp;\n\t\t\t\t\t\t\t\t<span ng-show='gig.musical'>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='mailto:{{gig.musical.email}}'>Email</a>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='sms:{{gig.musical.phone}}'>Text</a>\n\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href='tel:{{gig.musical.phone}}'>Call</a>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dt>Colors</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>{{ gig.colors}}&nbsp; </dd>\n\t\t\t\t\t\t\t<dt>Who's Coming</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t\t<strong>Yeses:</strong> {{(membersList | availableFilter:['Yes', gig] | memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/><strong>Maybes:</strong> {{(membersList |  availableFilter:['Maybe', gig] |  memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/><strong>Noes:</strong> {{(membersList |  availableFilter:['No', gig] |  memberProperty:['name'])}}\n\t\t\t\t\t\t\t\t\t<br/>Contact Yeses and Maybes:\n\t\t\t\t\t\t\t\t\t<span ng-show='gig.tactical'>\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href=\"mailto:{{(membersList | availableFilter:['Coming', gig] | memberProperty:['email', ';'])}}\">Email</a>\n\t\t\t\t\t\t\t\t\t\t<a class='btn btn-info btn-xs' href=\"sms:{{(membersList | availableFilter:['Coming', gig] | memberProperty:['phone'])}}\">Text</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</dd>\n\n\t\t\t\t\t\t\t<dt>Details</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>{{ gig.notes}}&nbsp; </dd>\n\t\t\t\t\t\t\t<dt>Set List</dt>\n\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t<span ng-repeat='song in gig.setlist'><strong>{{$index+1}}.</strong> {{song}} </span>&nbsp;\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<div ng-class=\"{'alert alert-danger':(membersList | concernFilter:gig).length > 0}\">\n\t\t\t\t\t\t\t\t<dt>Member Concerns</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t\t<span class='' member-comments></span>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<dt>Member Comments</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix'>\n\t\t\t\t\t\t\t\t\t<span class='' member-comments type='comments'></span>\n\t\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<!--<div ng-show='isCollapsed'><dt><a href='' ng-click=\"isCollapsed = !isCollapsed\">More details…</a></dt><dd>&nbsp;</dd></div>\n\t\t\t\t\t\t\t<div collapse='isCollapsed'>-->\n\n\t\t\t\t\t\t\t<h4 class='text-info'>Event Details</h4>\n\t\t\t\t\t\t\t\t<dt>Description</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix' ng-bind-html=\"gig.description | linky\"></dd>\n\t\t\t\t\t\t\t\t<dt>Public Description</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix' ng-bind-html=\"gig.public_description | linky\"></dd>\n\t\t\t\t\t\t\t\t<dt>Organizer</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix'>{{ gig.who}}&nbsp; </dd>\n\t\t\t\t\t\t\t\t<dt>Contact</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix' ng-bind-html=\"gig.contact | linky\"></dd>\n\t\t\t\t\t\t\t\t<dt>URL</dt>\n\t\t\t\t\t\t\t\t<dd class='clearfix' ng-bind-html=\"gig.url | linky\"></dd>\n\t\t\t\t\t\t\t\t<div gig-details='1'></div>\n\t\t\t\t\t\t\t\t<!--</div>-->\n\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t</tab>\n\t\t\t\t\t<tab heading='Band Info' class='tab-pane' id='band_details' active=\"tab['band_details']\">\n\t\t\t\t\t\t<div class='alert alert-danger' ng-show=\"gig.approved == 1 && !gig.public_description\">This gig has been approved, but can't be published to the public calendar until a public description has been entered below.</div>\n\t\t\t\t\t\t<div class='form-horizontal container-fluid'>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='title'>Title</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' type='text' ng-model='gig.title'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class=\"col-md-4 control-label text-right\">Band Approval</label>\n\t\t\t\t\t\t\t\t<div class=\"col-md-8\">\n\t\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" ng-click='gig.approved=1' ng-class=\"{'active btn-success': gig.approved == 1}\"><i class='glyphicon glyphicon-thumbs-up'></i> Approved</button>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" ng-click='gig.approved=0' ng-class=\"{'active btn-warning': gig.approved == 0}\" ><i class='glyphicon glyphicon-question-sign'></i> Undecided</button>\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default\" ng-click='gig.approved=-1' ng-class=\"{'active btn-danger': gig.approved == -1}\" ><i class='glyphicon glyphicon-thumbs-down'></i> Declined</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class=\"col-md-4 control-label text-right\">Band Meet Time</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t\t<time-picker model='gig.meet_time'></time-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class=\"col-md-4 control-label text-right\">Band Play Time</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<time-picker model=\"gig.band_start\"></time-picker>\n\t\t\t\t\t\t\t\t\t<label for='band_end'  style='vertical-align: text-bottom;'>To</label>\n\t\t\t\t\t\t\t\t\t<time-picker model=\"gig.band_end\"></time-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='tactical'>Tactical</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' autocomplete='off' type='text' ng-model='gig.tactical' typeahead='member as member.name for member in membersList | filter:{name:$viewValue}' />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='musical'>Musical</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' autocomplete='off' type='text' typeahead='member as member.name for member in membersList | filter:{name: $viewValue}' ng-model='gig.musical'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='colors'>Colors</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' type='text' autocomplete='off' typeahead=\"c for c in ['Red and Black', 'Pink and Black', 'Black and Black'] | filter:$viewValue\" ng-model='gig.colors'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='public_description'>Public Description</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<textarea placeholder='Enter a short (2-3 lines) description for the public calendar and website' class='form-control' spellcheck=\"true\" ng-model='gig.public_description'></textarea>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='notes'>Notes</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<textarea class='form-control' spellcheck=\"true\" rows=5 ng-model='gig.notes'></textarea>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<div class='col-md-offset-4 col-md-8'>\n\t\t\t\t\t\t\t\t\t<span ng-click='setModalState(\"email\")' class='btn btn-primary'>Send Details to band list</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<h4 class='text-center'>Set List</h4>\n\t\t\t\t\t\t\t\t\t<div set-list songs='songs' setlist='gig.setlist'></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</tab>\n\t\t\t\t\t<tab heading='Event Info' class='tab-pane' id='event_details' active=\"tab['event_details']\">\n\t\t\t\t\t\t<div class='form-horizontal container-fluid'>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='title'>Title</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<input class='form-control' type='text' ng-model='gig.title'/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='date'>Date</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<date-picker model=\"gig.date\"></date-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class=\"col-md-4 control-label text-right\">Event Time</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'>\n\t\t\t\t\t\t\t\t\t<time-picker model=\"gig.start_time\"></time-picker>\n\t\t\t\t\t\t\t\t\t<label for='band_end'  style='vertical-align: text-bottom;'>To</label>\n\t\t\t\t\t\t\t\t\t<time-picker model=\"gig.end_time\"></time-picker>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='location'>Location</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><input class='form-control' type='text' ng-model='gig.location'/></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='description'>Description</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><textarea class='form-control' spellcheck=\"true\" rows=5 ng-model='gig.description'></textarea></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='url'>URL</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><input class='form-control' type='text' ng-model='gig.url'/></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='who'>Organizer</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><input class='form-control' type='text' ng-model='gig.who'/></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='contact'>Contact</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><input class='form-control' type='text' ng-model='gig.contact'/></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='form-group'>\n\t\t\t\t\t\t\t\t<label class='col-md-4 control-label text-right' for='details'>Details</label>\n\t\t\t\t\t\t\t\t<div class='col-md-8'><textarea class='form-control' spellcheck=\"true\" rows=8 ng-model='gig.details'></textarea></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</tab>\n\t\t\t\t\t<tab heading='Availability' class='tab-pane' id='availability' active=\"tab['availability']\">\n\t\t\t\t\t\t<div class='band-availability'>\n\t\t\t\t\t\t\t<div class='panel panel-default'>\n\t\t\t\t\t\t\t\t<div class='panel-heading'>\n\t\t\t\t\t\t\t\t\t<div class='row form-inline text-center'>\n\t\t\t\t\t\t\t\t\t\t<span class='col-xs-6'>\n\t\t\t\t\t\t\t\t\t\t\t<label for='name_filter'>Name:</label>\n\t\t\t\t\t\t\t\t\t\t\t<input name='name_filter' autocomplete='off' style='margin-right: 20px;' class='form-control input-sm' type='text' ng-model='membernamefilter'/>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class='col-xs-6'>\n\t\t\t\t\t\t\t\t\t\t\t<label for='availability_filter'>Availability:</label>\n\t\t\t\t\t\t\t\t\t\t\t<select name='availability_filter' class='form-control input-sm' ng-model='memberavailablefilter' id='member_availability_filter'>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='' data-icon='glyphicon glyphicon-smile'>All</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='Yes' data-icon='glyphicon glyphicon-smile'>Available</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option value='No' data-icon='glyphicon glyphicon-frown'>Unavailable</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-meh'>Maybe</option>\n\t\t\t\t\t\t\t\t\t\t\t\t<option data-icon='glyphicon glyphicon-question'>Unknown</option>\n\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class='list-group'>\n\t\t\t\t\t\t\t\t\t<li ng-class=\"{\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-success': gig.availability[member.id].available == 'Yes',\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-warning': gig.availability[member.id].available == 'Maybe',\n\t\t\t\t\t\t\t\t\t\t\t'list-group-item-danger': gig.availability[member.id].available == 'No'\n\t\t\t\t\t\t\t\t\t\t}\" class='list-group-item' ng-repeat=\"member in membersList | filter:{name:membernamefilter} | availableFilter:[memberavailablefilter, gig]\" id=\"availability_{{member.id}}\">\n\t\t\t\t\t\t\t\t\t\t<div class='row'>\n\t\t\t\t\t\t\t\t\t\t\t<span class='col-xs-5'>\n\t\t\t\t\t\t\t\t\t\t\t\t{{member.name}} <small ng-style=\"{display: mobile ? 'block': ''}\">({{member.groups}})</small>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class='col-xs-7'>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"btn-group btn-group\" ng-class='{\"btn-group-xs\": mobile}' ng-click='update()' loading-feedback=\"setAvailability({{member.id}})\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-success': gig.availability[member.id].available == 'Yes'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Yes'\">Yes</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-warning': gig.availability[member.id].available == 'Maybe'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Maybe'\">Maybe</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-class=\"{'btn-danger': gig.availability[member.id].available == 'No'}\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'No'\">No</label>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"btn btn-default\" ng-model=\"gig.availability[member.id].available\" btn-radio=\"'Unknown'\">Unknown</label>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</tab>\n\t\t\t\t</tabset>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</div>\n<div modal='{{showModal}}'></div>\n\n<script type=\"text/ng-template\" id=\"setList.html\">\n\t<div class='col-xs-12 setlist'>\n\t\t<div class='text-center'>\n\t\t\tDrag or double-click songs from the left to create a set list on the right. Drag to reorder the set list. Drag or double-click to remove songs from the set list.\n\t\t</div>\n\n\t\t<div sv-root class=\"multi-sortable\">\n\t\t\t<div class=\"sortable-container panel panel-default col-xs-6\" sv-part=\"songs\">\n\t\t\t\t<div class='panel-heading clearfix'>\n\t\t\t\t\t<strong>BLO Repertoire</strong>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<!--this is just a placeholder to make lists line up-->\n\t\t\t\t\t<form style='visibility: hidden;' class='input-group input-group-sm'><input class='form-control'></form>\n\t\t\t\t</div>\n\t\t\t\t<ul class='list-group'>\n\t\t\t\t\t<li ng-repeat=\"item in songs\" ng-dblclick=\"addSong(item)\" sv-element class=\"list-group-item\">\n\t\t\t\t\t\t<div class='media'>\n\t\t\t\t\t\t\t<div sv-handle ng-if='$parent.$parent.$parent.mobile' class=\"media-left\">\n\t\t\t\t\t\t\t\t<img src='img/dndHandle.gif'/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='media-body'>\n\t\t\t\t\t\t\t\t{{item}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class=\"sortable-container panel panel-info col-xs-6\" sv-part=\"setlist\">\n\t\t\t\t<div class='panel-heading'>\n\t\t\t\t\t<strong>Set List</strong>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<form class='input-group input-group-sm' ng-submit='addSong()'>\n\t\t\t\t\t\t\t<input ng-model='$parent.newsong' class='form-control' placeholder='Add a song/chant not on the list'>\n\t\t\t\t\t\t\t<span ng-click='addSong()' class='input-group-addon'><i class='glyphicon glyphicon-plus'></i></span>\n\t\t\t\t\t\t\t<input type=\"submit\" style=\"position: absolute; left: -9999px; width: 1px; height: 1px;\"/>\n\t\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<ul class='list-group'>\n\t\t\t\t\t<li ng-repeat=\"item in setlist\" ng-dblclick=\"removeSong(item)\" sv-element class=\"list-group-item\">\n\t\t\t\t\t\t<div class='media'>\n\t\t\t\t\t\t\t<div sv-handle ng-if='$parent.$parent.$parent.mobile' class=\"media-left\">\n\t\t\t\t\t\t\t\t<img src='img/dndHandle.gif'/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class='media-body'>\n\t\t\t\t\t\t\t\t{{$index+1}}. {{item}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</script>\n\n<script type=\"text/ng-template\" id=\"emailInfo.html\">\n\t<div class=\"modal-header\">\n\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n\t\t<h3>Send Band Email</h3>\n\t\tReview and edit the auto-generated email below.\n\t\t<br/><b>Note: </b>If you are adding any more information, please enter and save those details in giggity first!\n\t\t<div ng-if=\"! gig.notes\">You haven't entered any gig details. You should probably do that before sending the band an email</div>\n\t\t<div ng-if=\"! gig.meet_time\">You haven't entered a meetup time. You should probably do that before sending the band an email</div>\n\t</div>\n\t<div class=\"modal-body\">\n\t\t<div class='form form-horizontal'>\n\t\t\t<div class=\"form-group row\">\n\t\t\t\t<label class=\"col-md-2 control-label text-right\">Subject</label>\n\t\t\t\t<div class=\"col-md-10\"><input class=\"form-control\" type=\"text\" ng-model=\"subject\"/></div>\n\t\t\t</div>\n\t\t\t<div class=\"form-group row\">\n\t\t\t\t<label class=\"col-md-2 control-label text-right\">Body</label>\n\t\t\t\t<div class=\"col-md-10\"><textarea class=\"form-control\" rows=15 ng-model=\"body\"></textarea></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class=\"modal-footer\">\n\t\t<a href=\"\" feedback-button ng-click='send()' class=\"btn btn-primary\">Send Email</a>\n\t\t<a href=\"\" data-dismiss='modal' class=\"btn btn-default\">Cancel</a>\n\t</div>\n</script>\n\n<script type=\"text/ng-template\" id=\"modal.html\">\n\t<div id='modal' class='modal fade' data-keyboard='true' data-backdrop='true'>\n\t\t<div class=\"modal-dialog\">\n\t\t\t<div class=\"modal-content\">\n\t\t\t\t<div ng-show='showModal == \"login\"'>\n\t\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n\t\t\t\t    <h3>Sign In!</h3>\n\t\t\t\t  </div>\n\t\t\t\t  <div class=\"modal-body\" style='max-height: 10000px; overflow: visible;'>\n\t\t\t\t\t  <p>This will make it easier for you to set your gig availability</p>\n\t\t\t\t\t  <form id='login_form' class='form-inline' ng-submit='setUser()'>\n\t\t\t\t\t\t\t<span id='login_error' class=\"help-inline text-danger\" style='display: none;'>The name you typed isn't recognized. Please select a name from the dropdown. </span>\n\t\t\t\t\t\t  <input class='form-control' autocomplete='off' id='current_user_input' type='text' ng-model='user' placeholder='Just type your name' typeahead='member as member.name for member in membersList | filter:{name:$viewValue}' />\n\t\t\t\t\t    <button type='submit' class=\"btn btn-primary\">OK</button>\n\t\t\t\t\t    <button type='button' ng-click='showModal=false' class=\"btn btn-default\">Sign Out</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ng-show='showModal == \"confirm\"'>\n\t\t\t\t\t<div class=\"modal-header\">\n\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">&times;</button>\n\t\t\t\t\t\t<h3>Delete '{{gig.title}}'?</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"modal-body\">\n\t\t\t\t\t\t<p>Are you sure?</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"modal-footer\">\n\t\t\t\t\t\t<a href=\"\" ng-click='deleteGig(gig.gig_id)' class=\"btn btn-primary\">Yes</a>\n\t\t\t\t\t\t<a href=\"\" ng-click='showModal=false' class=\"btn btn-default\">Cancel</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div ng-if='showModal == \"email\"'>\n\t\t\t\t\t<div email-info gig=\"gig\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</script>\n");
}]);